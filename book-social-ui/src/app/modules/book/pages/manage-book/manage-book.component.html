<div class="container py-5">
    <h2 class="text-center text-primary mb-4">Manage Your Book</h2>
    <hr class="border-primary mb-4">

    <!-- Error Message Box -->
    <div class="alert alert-danger mt-2" role="alert" *ngIf="errorMsg.length">
        <ul class="mb-0">
            <li *ngFor="let msg of errorMsg">{{ msg }}</li>
        </ul>
    </div>

    <div class="d-flex flex-column flex-lg-row gap-4">
        <!-- Image Section -->
        <div class="col-md-4 col-12 text-center">
            <img class="rounded-3 shadow-lg w-100" [src]="selectedPicture || 'https://picsum.photos/200'" alt="Book Cover">
            <div class="mt-3">
                <input
                    (change)="onFileSelected($event)"
                    type="file"
                    class="form-control form-control-lg"
                    accept="image/*"
                    id="formFile"
                    style="cursor: pointer; background-color: #f8f9fa; border: 2px solid #ddd; border-radius: 0.375rem; padding: 8px;">
                <small class="d-block mt-2 text-muted">Choose a cover image</small>
            </div>
        </div>

        <!-- Form Section -->
        <div class="col-md-8 col-12">
            <form class="row g-4">
                <!-- Title Field -->
                <div class="col-12">
                    <label for="title" class="form-label text-secondary">Book Title</label>
                    <input [(ngModel)]="bookRequest.title" name="title" type="text" class="form-control form-control-lg" id="title" placeholder="Enter book title" [ngClass]="{'is-invalid': errorMsg.length}">
                </div>

                <!-- Author and ISBN Fields -->
                <div class="col-md-6 col-12">
                    <label for="authorName" class="form-label text-secondary">Author</label>
                    <input [(ngModel)]="bookRequest.authorName" name="text" type="text" class="form-control form-control-lg" id="author" placeholder="Enter author name" [ngClass]="{'is-invalid': errorMsg.length}">
                </div>
                <div class="col-md-6 col-12">
                    <label for="isbn" class="form-label text-secondary">ISBN</label>
                    <input [(ngModel)]="bookRequest.isbn" type="text" name="isbn" class="form-control form-control-lg" id="isbn" placeholder="Enter ISBN" [ngClass]="{'is-invalid': errorMsg.length}">
                </div>

                <!-- Synopsis Field -->
                <div class="col-12">
                    <label for="synopsis" class="form-label text-secondary">Synopsis</label>
                    <textarea [(ngModel)]="bookRequest.synopsis" name="synopsis" rows="4" class="form-control form-control-lg" id="synopsis" placeholder="Enter book synopsis" [ngClass]="{'is-invalid': errorMsg.length}"></textarea>
                </div>

                <!-- Share Checkbox -->
                <div class="col-12 form-check">
                    <input [(ngModel)]="bookRequest.sharable" name="shareMe" type="checkbox" class="form-check-input" id="shareMe">
                    <label class="form-check-label text-secondary" for="shareMe">Allow others to share this book</label>
                </div>

                <!-- Action Buttons -->
                <div class="col-12 d-flex justify-content-end gap-3">
                    <button type="button" class="btn btn-outline-danger btn-lg px-4 py-2" (click)="cancel()">
                        <em class="fas fa-times"></em> Cancel
                    </button>
                    <button type="button" class="btn btn-primary btn-lg px-4 py-2" (click)="saveBook()" [class.disabled]="loading">
                        <em class="fas fa-save"></em> Save
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
